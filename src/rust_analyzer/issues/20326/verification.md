# ğŸ§ª å‹•ä½œç¢ºèªã®æ–¹æ³•

## ğŸ¬ ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

å®Ÿè£…ã—ãŸæ©Ÿèƒ½ãŒã¡ã‚ƒã‚“ã¨å‹•ãã‹ã‚’**è¦–è¦šçš„ã«**ç¢ºèªã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

### ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œãƒ•ãƒ­ãƒ¼

```
ğŸ‘† ã‚«ãƒ¼ã‚½ãƒ«ã‚’ use æ–‡ã«ç½®ã
     â†“
ğŸ’¡ Code Action ãŒè¡¨ç¤ºã•ã‚Œã‚‹
     â†“  
âœ¨ ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ç§»å‹•å®Œäº†ï¼
```

## ğŸš€ Step-by-Step ãƒ†ã‚¹ãƒˆ

### 1. æº–å‚™ï¼šãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆ

```rust
// test_file.rs
fn example_function() {
    use std::collections::HashMap;
    use std::vec::Vec;
    
    let map = HashMap::new();
    let vec = Vec::new();
}

mod inner_module {
    fn another_function() {
        use std::fs::File;
        // some code
    }
}
```

### 2. åŸºæœ¬å‹•ä½œã®ç¢ºèª

#### âœ… Step 1: ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ãƒ†ã‚¹ãƒˆ
```
1. `use std::collections::HashMap;` ã®è¡Œã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç½®ã
2. Code Action (Ctrl+. / Cmd+.) ã‚’å‘¼ã³å‡ºã™
3. "Move use statement to top-level" ã®ã‚ˆã†ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèª
```

#### âœ… Step 2: ç§»å‹•å‹•ä½œãƒ†ã‚¹ãƒˆ
```
Expected Result:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ use std::collections::HashMap;  â”‚ â† ç§»å‹•ã•ã‚ŒãŸ
â”‚ use std::vec::Vec;              â”‚ â† ç§»å‹•ã•ã‚ŒãŸ
â”‚                                 â”‚
â”‚ fn example_function() {         â”‚
â”‚     let map = HashMap::new();   â”‚
â”‚     let vec = Vec::new();       â”‚
â”‚ }                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ è©³ç´°ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### Case 1: å˜ä¸€ã® use æ–‡
```rust
// Before
fn test() {
    use std::fs::File;  // ğŸ‘ˆ ã‚«ãƒ¼ã‚½ãƒ«ã‚’ã“ã“ã«
    let f = File::open("test.txt");
}

// After
use std::fs::File;

fn test() {
    let f = File::open("test.txt");
}
```

### Case 2: æ—¢å­˜ã® use æ–‡ãŒã‚ã‚‹å ´åˆ
```rust
// Before
use std::collections::Vec;  // æ—¢å­˜

fn test() {
    use std::fs::File;  // ğŸ‘ˆ ã‚«ãƒ¼ã‚½ãƒ«ã‚’ã“ã“ã«
}

// After
use std::collections::Vec;
use std::fs::File;  // ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚Œã‚‹

fn test() {
    // ...
}
```

### Case 3: ãƒã‚¹ãƒˆã—ãŸé–¢æ•°
```rust
// Before
fn outer() {
    fn inner() {
        use std::thread;  // ğŸ‘ˆ ã‚«ãƒ¼ã‚½ãƒ«ã‚’ã“ã“ã«
        thread::spawn(|| {});
    }
}

// After
use std::thread;

fn outer() {
    fn inner() {
        thread::spawn(|| {});
    }
}
```

## ğŸ” ç¢ºèªã™ã¹ããƒã‚¤ãƒ³ãƒˆ

### âœ… æ­£å¸¸å‹•ä½œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] ã‚«ãƒ¼ã‚½ãƒ«ãŒ`use`æ–‡ã«ã‚ã‚‹ã¨ãã ã‘ã‚¢ã‚·ã‚¹ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] `use`æ–‡ãŒãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ã«ç§»å‹•ã•ã‚Œã‚‹
- [ ] æ—¢å­˜ã®`use`æ–‡ã¨é©åˆ‡ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã•ã‚Œã‚‹
- [ ] å…ƒã®`use`æ–‡ãŒå‰Šé™¤ã•ã‚Œã‚‹
- [ ] ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒæ­£ã—ãä¿ãŸã‚Œã‚‹

### âŒ ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®`use`æ–‡ã§ã¯å‹•ä½œã—ãªã„
- [ ] è¤‡æ•°è¡Œã«ã‚ãŸã‚‹`use`æ–‡ã§ã‚‚å‹•ä½œã™ã‚‹
- [ ] ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãã®`use`æ–‡ã§ã‚‚å‹•ä½œã™ã‚‹

## ğŸ›  é–‹ç™ºæ™‚ã®ãƒ†ã‚¹ãƒˆæ–¹æ³•

### rust-analyzer ã®é–‹ç™ºç’°å¢ƒã§ï¼š
```bash
# ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
cargo test assists::move_use_to_top

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å®Ÿè¡Œ
cargo test assists::move_use_to_top::test_basic_move
```

### VS Code ã§ã®ç¢ºèªï¼š
1. rust-analyzer ã‚’é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§ãƒ“ãƒ«ãƒ‰
2. VS Code ã®æ‹¡å¼µæ©Ÿèƒ½ã¨ã—ã¦èª­ã¿è¾¼ã¿
3. ä¸Šè¨˜ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ç¢ºèª